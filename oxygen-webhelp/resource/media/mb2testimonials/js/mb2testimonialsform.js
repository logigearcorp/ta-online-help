/**
 * @package		Mb2 Testimonials
 * @version		1.3.10
 * @author		Mariusz Boloz (http://mb2extensions.com)
 * @copyright	Copyright (C) 2014 - 2016 Mariusz Boloz (http://mb2extensions.com). All rights reserved
 * @license		Commercial (http://codecanyon.net/licenss)
**/
jQuery(document).ready(function(e){function s(e){var s=new RegExp(/^([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/);return s.test(e)?!0:!1}e(".mb2testimonials-feadd-testimonial").click(function(s){e(".mb2testimonials-form-wrap-lightbox").show();var m=e("#mb2testimonials-feform").parent().offset();e("html, body").animate({scrollTop:m.top-20},350),s.preventDefault()}),e(".mb2testimonials-form-wrap-lightbox").each(function(){var s=e(this),m=s.find(".mb2tetsimonials-form-message-close"),a=s.find("#mb2testimonials-feform"),i=s.find(".mb2tetsimonials-form-message");m.click(function(e){s.hide(),a.removeClass("mb2tetsimonials-hide"),i.empty(),e.preventDefault()})}),e("#fe_form_empty").hide(),e("#mb2testimonials-feform").submit(function(m){m.preventDefault();var a=e(this),i=a.attr("action"),t=e(".mb2testimonials-form-wrap"),r=t.find(".mb2testimonials-feform"),o=(r.find(".mb2testimonials-feform-inner"),r.find(".mb2tetsimonials-form-message")),n=(e('<a href="#" class="mb2tetsimonials-form-message-close" title="Close">Close</a>'),a.find("#fe_form_button")),f=a.find("#mb2testimonial-loading-image"),l=!1,d=a.find("#fe_form_message"),b=a.find("#fe_form_rating"),p=a.find("#fe_form_product"),v=a.find("#fe_form_name"),c=a.find("#fe_form_empty"),g=a.find("#fe_form_company_url"),h=a.find("#fe_form_question"),u='<span class="mb2testimonials-form-message"></span>',_="This field is required!",C="Type valid url!";if(void 0===window.FormData){var y='<span class="mb2testimonials-message mb2testimonials-message-error">FormData is not suppoerted. It looks that Your browser is out-of-date. Please update browser and try again.</span>';return o.html(y),!1}if(""!=c.val()&&(l=!0),""==d.val()){d.addClass("mb2tetsimonials-form-field-error");var w=d.parent();w.find(".mb2testimonials-form-message")[0]?"":w.append(u);var D=w.find(".mb2testimonials-form-message");D.html(_),l=!0}else{d.removeClass("mb2tetsimonials-form-field-error");var w=d.parent(),D=w.find(".mb2testimonials-form-message");D.remove()}if(""==b.val()){b.addClass("mb2tetsimonials-form-field-error");var T=b.parent();T.find(".mb2testimonials-form-message")[0]?"":T.append(u);var x=T.find(".mb2testimonials-form-message");x.html(_),l=!0}else{b.removeClass("mb2tetsimonials-form-field-error");var T=b.parent(),x=T.find(".mb2testimonials-form-message");x.remove()}if(!p.hasClass("mb2testimonials-no-empty"))if(""==p.val()){p.addClass("mb2tetsimonials-form-field-error");var k=p.parent();k.find(".mb2testimonials-form-message")[0]?"":k.append(u);var F=k.find(".mb2testimonials-form-message");F.html(_),l=!0}else{p.removeClass("mb2tetsimonials-form-field-error");var k=p.parent(),F=k.find(".mb2testimonials-form-message");F.remove()}if(""==v.val()){v.addClass("mb2tetsimonials-form-field-error");var j=v.parent();j.find(".mb2testimonials-form-message")[0]?"":j.append(u);var q=j.find(".mb2testimonials-form-message");q.html(_),l=!0}else{v.removeClass("mb2tetsimonials-form-field-error");var j=v.parent(),q=j.find(".mb2testimonials-form-message");q.remove()}if(""==g.val()||s(g.val())){g.removeClass("mb2tetsimonials-form-field-error");var z=g.parent(),P=z.find(".mb2testimonials-form-message");P.remove()}else{g.addClass("mb2tetsimonials-form-field-error");var z=g.parent();z.find(".mb2testimonials-form-message")[0]?"":z.append(u);var P=z.find(".mb2testimonials-form-message");P.html(C),l=!0}if(void 0!==h)if(""==h.val()){h.addClass("mb2tetsimonials-form-field-error");var E=h.parent();E.find(".mb2testimonials-form-message")[0]?"":E.append(u);var I=E.find(".mb2testimonials-form-message");I.html(_),l=!0}else{h.removeClass("mb2tetsimonials-form-field-error");var E=h.parent(),I=E.find(".mb2testimonials-form-message");I.remove()}if(1==l)return!1;n.css({opacity:.3}),n[0].disabled=!0,f.show();var O=new FormData(e(this)[0]);e.ajax({url:i,type:"POST",data:O,cache:!1,contentType:!1,processData:!1,success:function(e){n.css({opacity:1}),n[0].disabled=!1,f.hide(),a[0].reset(),n.css({opacity:1}),f.hide(),n[0].disabled=!1,a.addClass("mb2tetsimonials-hide"),o.html(e)}})})});